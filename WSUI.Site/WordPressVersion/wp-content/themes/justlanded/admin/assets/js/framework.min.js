function slugify(e){e=e.replace(/[^-a-zA-Z0-9,&\s]+/ig,"");e=e.replace(/-/gi,"_");e=e.replace(/\s/gi,"-");return e}jQuery.download=function(e,t,n){if(e&&t){t=typeof t=="string"?t:jQuery.param(t);var r="";jQuery.each(t.split("&"),function(){var e=this.split("=");r+='<input type="hidden" name="'+e[0]+'" value="'+e[1]+'" />'});jQuery('<form action="'+e+'" method="'+(n||"post")+'">'+r+"</form>").appendTo("body").submit().remove()}};jQuery.noConflict();jQuery(document).ready(function(e){function o(){e(".image_upload_button").each(function(){var t=e(this);var n=e(this).attr("id");var r=e("#security").val();var i=e("#this_profile").val();new AjaxUpload(n,{action:ajaxurl,name:n,data:{action:"of_ajax_post_action",type:"upload",profile:i,security:r,data:n},autoSubmit:true,responseType:false,onChange:function(e,t){},onSubmit:function(e,n){t.text("Uploading");this.disable();interval=window.setInterval(function(){var e=t.text();if(e.length<13){t.text(e+".")}else{t.text("Uploading")}},200)},onComplete:function(r,i){window.clearInterval(interval);t.text("Upload Image");this.enable();if(i==-1){var s=e("#of-popup-fail");s.fadeIn();window.setTimeout(function(){s.fadeOut()},2e3)}else if(i.search("Upload Error")>-1){var o='<span class="upload-error">'+i+"</span>";e(".upload-error").remove();t.parent().after(o)}else{var o='<img class="hide of-option-image" id="image_'+n+'" src="'+i+'" alt="" />';e(".upload-error").remove();e("#image_"+n).remove();t.parent().after(o);e("img#image_"+n).fadeIn();t.next("span").fadeIn();t.parent().prev("input").val(i)}}})})}function u(t){var n=t;if(this.timer){clearTimeout(n.timer)}this.timer=setTimeout(function(){e(n).parent().prev().find("strong").text(n.value)},100);return true}function a(){var t=e("#security").val();e(".ajax-loading-img").fadeIn();var n=e('#of_form :input[name][name!="security"][name!="of_reset"]').serialize();var r=e("#this_profile").val();var i={type:"save",action:"of_ajax_post_action",security:t,profile:r,data:n};e.post(ajaxurl,i,function(t){var n=e("#of-popup-save");var r=e("#of-popup-fail");var i=e(".ajax-loading-img");i.fadeOut();if(t==1){n.find(".of-save-save").html("Options Updated");n.fadeIn()}else{r.fadeIn()}window.setTimeout(function(){n.fadeOut();r.fadeOut()},2e3)})}e.minicolors.defaults=e.extend(e.minicolors.defaults,{control:"hue",inline:false,position:"bottom left"});var t=[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,29,32,35,36,37,38,40,42,45,48,50,52,54,56,58,60,61,62];var n=[.5,.55,.625,.7,.75,.8,.875,.95,1,1.05,1.125,1.2,1.25,1.3,1.4,1.45,1.5,1.6,1.8,2,2.2,2.25,2.3,2.35,2.45,2.55,2.75,3,3.13,3.25,3.38,3.5,3.63,3.75,3.81,3.88];e.ajaxSetup({cache:false});e(".select").attr("autocomplete","off");e(".input").attr("autocomplete","off");jQuery(".fld").click(function(){var t=".f_"+this.id;e(t).slideToggle("normal","swing")});if(typeof AjaxUpload!="function"){return++counter<6&&window.setTimeout(init,counter*500)}e("#js-warning").hide();e(".group").hide();e(".of-submenu").hide();if(e.cookie("of_current_opt")===null){e(".group:first").fadeIn("fast");e("#of-nav li:first").addClass("current")}else{var r=e("#hooks").html();r=jQuery.parseJSON(r);e.each(r,function(t,n){if(e.cookie("of_current_opt")=="#of-option-"+n){e(".group#of-option-"+n).fadeIn();e("#of-nav li."+n).addClass("current");e(".of-parent-"+n).show();var r=e("#of-nav li."+n).attr("class");var i=r.split(" ");e.each(i,function(){if(this.indexOf("of-parent-")>-1){var t=this;t=t.replace("of-parent-","");e("."+t).addClass("current-parent");e(".of-parent-"+t).show();return false}})}})}e("#of-nav li a").click(function(t){if(e(this).parent().hasClass("of-submenu")==false){if(e(this).parent().hasClass("current")==false&&e(this).parent().hasClass("current-parent")==false){e(".of-submenu").slideUp("fast")}e(".current-parent").removeClass("current-parent")}var n=e(this).parent().attr("class");n=n.replace(" current","");n=n.replace(" ","");e("li.of-parent-"+n).slideDown("fast");if(e(this).parent().hasClass("of-submenu")){var r=n.split(" ");e.each(r,function(){if(this.indexOf("of-parent-")>-1){var t=this;t=t.replace("of-parent-","");e("."+t).addClass("current-parent");return false}})}e("#of-nav li").removeClass("current");e(this).parent().addClass("current");if(e(this).hasClass("of-redirect")){e("#of-nav ul").find("li.of-parent-"+n+" a").first().click();return false}var i=e(this).attr("href");e.cookie("of_current_opt",i,{expires:7,path:"/"});e(".group").hide();e(i).fadeIn("fast");return false});var i=0;e("#expand_options").click(function(){if(i==0){i=1;e("#of_container #of-nav").hide();e("#of_container #content").width(755);e("#of_container .group").add("#of_container .group h2").show();e(this).removeClass("expand");e(this).addClass("close");e(this).text("Close")}else{i=0;e("#of_container #of-nav").show();e("#of_container #content").width(595);e("#of_container .group").add("#of_container .group h2").hide();e("#of_container .group:first").show();e("#of_container #of-nav li").removeClass("current");e("#of_container #of-nav li:first").addClass("current");e(this).removeClass("close");e(this).addClass("expand");e(this).text("Expand")}});var s=0;e("#show_hints").click(function(){if(s==0){s=1;e(".explain").hide();e(".section-info").hide();e(".controls .can_toggle").width(595);e(this).removeClass("expand");e(this).addClass("close");e(this).text("Hide hints")}else{s=0;e(".explain").show();e(".section-info").show();e(".controls .can_toggle").width(345);e(this).removeClass("close");e(this).addClass("expand");e(this).text("Show hints")}});e.fn.center=function(){this.animate({top:(e(window).height()-this.height()-200)/2+e(window).scrollTop()+"px"},100);this.css("left",250);return this};e("#of-popup-save").center();e("#of-popup-reset").center();e("#of-popup-fail").center();e(window).scroll(function(){e("#of-popup-save").center();e("#of-popup-reset").center();e("#of-popup-fail").center()});e(".of-typography-face").change(function(){var t=e("#security").val();var n=e(this).attr("id");n=n.replace("_face","");var r=e(this).val();var i=e("#"+n+"_style");var s=e(this).attr("id");if(r.indexOf("*")===-1){e.post(ajaxurl,{type:"webfonts",action:"of_ajax_post_action",security:t,font:e(this).val()},function(t){var t=jQuery.parseJSON(t);var r=t.variants;var s=t.subsets;var o="";var u="";i.empty();if(r.length>0){o=r.join(",");e.each(r,function(e,t){i.append('<option value="'+t+'">'+t+"</option>")});i.find("option[value="+r[0]+"]").attr("selected","selected");var u=r[0]}e("#"+n+"_subset").empty();if(s.length>1){e.each(s,function(t,r){e("#"+n+"_subset").append('<input type="checkbox" class="checkbox of-input" name="'+n+"[subset]["+r+']" id="'+n+"_subset_"+r+'" value="1"><label class="multicheck" for="'+n+"_subset_"+r+'">'+r+"</label>")})}})}else{i.empty();i.append('<option value="regular">regular</option>');i.append('<option value="bold">bold</option>');i.append('<option value="italic">italic</option>');i.append('<option value="bold italic">bold italic</option>');i.find("option[value=regular]").attr("selected","selected");r=r.replace("*","")}});e(".of-typography-style").change(function(){var t=e(this).attr("id");t=t.replace("_style","");var n=e("#"+t+"_face").val();var r=e(this).val()});e(".of-typography-size").change(function(){var t=e(this).attr("id");t=t.replace("_size","");var n=e("#"+t+"_unit").val();var r=e(this).val()});e(".of-typography-unit").change(function(){var r=e(this).attr("id");r=r.replace("_unit","");var i=e(this).val();var s=e("#"+r+"_size").val();var o=e("#"+r+"_size");if(i=="em"){var u=t.indexOf(parseFloat(s));o.empty();var a=n.length,f=null;for(var l=0;l<a;l++){o.append('<option value="'+n[l]+'">'+n[l]+"</option>")}e("#"+r+"_size").val(n[u])}else{var u=n.indexOf(parseFloat(s));o.empty();var a=t.length,f=null;for(var l=0;l<a;l++){o.append('<option value="'+t[l]+'">'+t[l]+"</option>")}e("#"+r+"_size").val(t[u])}});e("input.of-typography-color").minicolors({change:function(t,n){e(this).change()}});e(".of-typography-color").change(function(){var t=e(this).attr("id");t=t.replace("_color","");var n=e(this).val()});e("#select_profile_value").live("change",function(){var t=e(this).find(":selected").val();var n=e("#security").val();var r=e("#of-popup-save");e(".ajax-loading-img").fadeIn();r.find(".of-save-save").html("Switching active profile...");r.fadeIn();e.ajax({type:"POST",data:{action:"of_ajax_post_action",type:"profile",profile:t,security:n},url:ajaxurl,success:function(t,n){e(".ajax-loading-img").fadeOut();window.setTimeout(function(){location.reload()},100)},error:function(t,n,r){e(".ajax-loading-img").fadeOut();alert("Could not change profile. Reloading page.");location.reload()}})});e(".swatch").each(function(t){var n=e(this).attr("title");e(this).css("backgroundColor",n)});e(".preset").live("click",function(){var t=e(this).attr("title");var n=e(this).attr("id");var r=confirm("Click OK to import preset '"+t+"'. Custom font and color settings of the active profile will be overwritten.");if(r){e(".ajax-loading-img").fadeIn();var i=e(this);var s=e(this).attr("id");var o=e(this).attr("id");o=o.replace("of_import_button_","");var u=e("#security").val();var a=e("#this_profile").val();var f={action:"of_ajax_post_action",type:"import_preset",security:u,profile:a,file:n,folder:"colors"};e.post(ajaxurl,f,function(t){e(".ajax-loading-img").fadeOut();var n=e("#of-popup-fail");var r=e("#of-popup-save");if(t==-1){n.fadeIn();window.setTimeout(function(){n.fadeOut()},2e3)}else{var r=e("#of-popup-save");r.find(".of-save-save").html("Preset has been imported.");r.fadeIn();window.setTimeout(function(){location.reload()},1e3)}})}return false});e(".of-radio-img-img").click(function(){e(this).parent().parent().find(".of-radio-img-img").removeClass("of-radio-img-selected");e(this).addClass("of-radio-img-selected")});e(".of-radio-img-label").hide();e(".of-radio-img-img").show();e(".of-radio-img-radio").hide();e(".of-radio-tile-img").click(function(){e(this).parent().parent().find(".of-radio-tile-img").removeClass("of-radio-tile-selected");e(this).addClass("of-radio-tile-selected")});e(".of-radio-tile-label").hide();e(".of-radio-tile-img").show();e(".of-radio-tile-radio").hide();o();e(".image_reset_button").live("click",function(){var t=e(this);var n=e(this).attr("id");var r=e(this).attr("title");var i=e("#security").val();var s=e("#this_profile").val();var o={action:"of_ajax_post_action",type:"image_reset",profile:s,security:i,data:r};e.post(ajaxurl,o,function(n){if(n==-1){var i=e("#of-popup-fail");i.fadeIn();window.setTimeout(function(){i.fadeOut()},2e3)}else{var s=e("#image_"+r);var o=e("#reset_"+r);s.fadeOut(500,function(){e(this).remove()});o.fadeOut();t.parent().prev("input").val("")}})});e(".slide_body").hide();e(".slide_edit_button").live("click",function(){e(this).parent().toggleClass("active").next().slideToggle("fast");return false});e(".of-slider-title").live("keyup",function(){u(this)});e(".slide_delete_button").live("click",function(){var t=confirm("Are you sure you wish to delete this item?");if(t){var n=e(this).parents("li");n.animate({opacity:.25,height:0},500,function(){e(this).remove()});return false}else{return false}});e(".slide_add_button").live("click",function(){var t=e(this).prev();var n=t.attr("id");var r=e("#"+n).attr("rel");var i=e("#"+n+" li").find(".order").map(function(){var e=this.id;e=e.replace(/\D/g,"");e=parseFloat(e);return e}).get();var s=Math.max.apply(Math,i);if(s<1){s=0}var u=s+1;var a="";if(t.hasClass("has_title")){if(t.hasClass("has_title_testimonial")){var f="Name"}else{var f="Title"}a="<label>"+f+"</label>"+'<input class="slide of-input of-slider-title" name="'+n+"["+u+'][title]" id="'+n+"_"+u+'_slide_title" value="">'}var l="";if(t.hasClass("has_subtitle")){var c="";if(t.hasClass("has_subtitle_testimonial")){c="/Company/Profession"}l="<label>Sub Title"+c+"</label>"+'<input class="slide of-input of-slider-subtitle" name="'+n+"["+u+'][subtitle]" id="'+n+"_"+u+'_slide_subtitle" value="">'}var h="";if(t.hasClass("has_link")){h="<label>Link URL</label>"+'<input placeholder="http://www.example.com" class="slide of-input" name="'+n+"["+u+'][link]" id="'+n+"_"+u+'_slide_link" value="">'}var p="";if(t.hasClass("has_image")){p="<label>Image URL</label>"+'<input class="slide of-input" name="'+n+"["+u+'][url]" id="'+n+"_"+u+'_slide_url" value="">'+'<div class="upload_button_div">'+'<span class="button-secondary media_upload_button" id="'+n+"_"+u+'" rel="'+r+'">Upload</span>'+'<span class="button-secondary mlu_remove_button hide" id="reset_'+n+"_"+u+'" title="'+n+"_"+u+'">Remove</span>'+"</div>"+'<div class="screenshot"></div>'}var d="";if(t.hasClass("has_description")){d="<label>Description/Text</label>"+'<textarea class="slide of-input" name="'+n+"["+u+'][description]" id="'+n+"_"+u+'_slide_description" cols="8" rows="8"></textarea>'}var v="";if(t.hasClass("has_price")){v="<label>Price</label>"+'<input placeholder="e.g. 19.95" class="slide of-input" name="'+n+"["+u+'][price]" id="'+n+"_"+u+'_slide_price" value="">'}var m="";if(t.hasClass("has_badge")){var g='<option value="">None</option><option value="badge_mostchosen">Most Chosen</option><option value="badge_favorite">Favorite</option><option value="badge_bestvalue">Best Value</option><option value="badge_bestseller">Bestseller</option>';m="<label>Badge</label>"+'<select class="slide of-input" name="'+n+"["+u+'][badge]" id="'+n+"_"+u+'_slide_badge value="">'+g+"</select>"}var y="";if(t.hasClass("has_highlight")){var b='<option value="no">no</option><option value="yes">yes</option>';y="<label>Featured/Highlighted</label>"+'<select class="slide of-input" name="'+n+"["+u+'][highlighted]" id="'+n+"_"+u+'_slide_highlighted value="">'+b+"</select>"}var w='<li class="temphide">'+'<div class="slide_header">'+"<strong>Item "+u+"</strong>"+'<input type="hidden" class="slide of-input order" name="'+n+"["+u+'][order]" id="'+n+"_slide_order-"+u+'" value="'+u+'">'+'<a class="slide_edit_button" href="#">Edit</a>'+"</div>"+'<div class="slide_body" style="display: none; ">'+a+l+p+h+d+v+m+y+'<a class="slide_delete_button" href="#">Delete</a>'+'<div class="clear"></div>'+"</div>"+"</li>";t.append(w);e(".temphide").fadeIn("fast",function(){e(this).removeClass("temphide")});o();return false});jQuery(".slider").find("ul").each(function(){var t=jQuery(this).attr("id");e("#"+t).sortable({placeholder:"placeholder",opacity:.6})});jQuery(".sorter").each(function(){var t=jQuery(this).attr("id");e("#"+t).find("ul").sortable({items:"li",placeholder:"placeholder",connectWith:".sortlist_"+t,opacity:.6,update:function(){e(this).find(".position").each(function(){var n=e(this).parent().attr("id");var r=e(this).parent().parent().attr("id");r=r.replace(t+"_","");var i=e(this).parent().parent().parent().attr("id");e(this).prop("name",i+"["+r+"]["+n+"]")})}})});e("#of_backup_button").live("click",function(){var t=confirm("Click OK to back up your current options.");if(t){var n=e(this);var r=e(this).attr("id");var i=e("#security").val();var s=e("#this_profile").val();var o={action:"of_ajax_post_action",type:"backup_options",profile:s,security:i};e(".ajax-loading-img").fadeIn();e.post(ajaxurl,o,function(t){e(".ajax-loading-img").fadeOut();if(t==-1){var n=e("#of-popup-fail");n.fadeIn();window.setTimeout(function(){n.fadeOut()},2e3)}else{var r=e("#of-popup-save");r.find(".of-save-save").html("Backup has been created.");r.fadeIn();window.setTimeout(function(){location.reload()},1e3)}})}return false});e("#of_restore_button").live("click",function(){var t=confirm("Warning: All of your current options will be replaced with the data from your last backup! Proceed?");if(t){var n=e(this);var r=e(this).attr("id");var i=e("#security").val();var s=e("#this_profile").val();var o={action:"of_ajax_post_action",type:"restore_options",profile:s,security:i};e(".ajax-loading-img").fadeIn();e.post(ajaxurl,o,function(t){e(".ajax-loading-img").fadeOut();if(t==-1){var n=e("#of-popup-fail");n.fadeIn();window.setTimeout(function(){n.fadeOut()},2e3)}else{var r=e("#of-popup-save");r.find(".of-save-save").html("Backup has been restored.");r.fadeIn();window.setTimeout(function(){location.reload()},1e3)}})}return false});e(".of_import_button").live("click",function(){var t=confirm("Click OK to import options.");if(t){var n=e(this);var r=e(this).attr("id");var i=e(this).attr("id");i=i.replace("of_import_button_","");var s=e("#security").val();var o=e("#this_profile").val();var u=e("#export_data_"+i).val();var a={action:"of_ajax_post_action",type:"import_options",profile:o,security:s,data:u};e(".ajax-loading-img").fadeIn();e.post(ajaxurl,a,function(t){e(".ajax-loading-img").fadeOut();var n=e("#of-popup-fail");var r=e("#of-popup-save");if(t==-1){n.fadeIn();window.setTimeout(function(){n.fadeOut()},2e3)}else{r.fadeIn();r.find(".of-save-save").html("Options have been imported.");window.setTimeout(function(){location.reload()},1e3)}})}return false});e("#of_copy_button").click(function(t){t.preventDefault();var n=e("#this_profile").val();var r=e("#of_copy_select").find(":selected").val();var i=confirm("You are about to copy the contents of the current profile (Profile "+n+") to the selected profile (Profile "+r+"). If you proceed, all existing settings and contents in that profile will be overwritten with the contents of the source profile. This action cannot be undone.");if(i){var s=e("#security").val();var o={type:"copy_profile",action:"of_ajax_post_action",profile:n,target:r,security:s};e(".ajax-loading-img").fadeIn();var u=e("#of-popup-save");u.find(".of-save-save").html("Copying profile "+n+" to "+r+"...");u.fadeIn();e.post(ajaxurl,o,function(t){var i=e("#of-popup-fail");e(".ajax-loading-img").fadeOut();if(t==1){u.find(".of-save-save").html("Successfully copied profile "+n+" to "+r+".");window.setTimeout(function(){u.fadeOut()},1e3)}else{u.fadeOut();i.fadeIn();window.setTimeout(function(){i.fadeOut()},2e3)}})}return false});e("#of_master_export").click(function(t){t.preventDefault();var n=e("#security").val();var r={type:"save_master_export",action:"of_ajax_post_action",security:n};e.download(ajaxurl,r,"post")});e("#of_master_import").click(function(t){t.preventDefault();var n=confirm("You are about to import a backup file. If you proceed, all existing settings and contents in all profiles will be overwritten with the contents of that file. This action cannot be undone.");if(n){e(".ajax-loading-img").fadeIn();var r=e("#security").val();var i=Math.floor(Math.random()*35e3);e(".ajax-reset-loading-img").fadeIn();var s={type:"save_master_import",action:"of_ajax_post_action",rand:i,security:r};e.post(ajaxurl,s,function(t){var n=e("#of-popup-reset");var r=e("#of-popup-fail");var i=e(".ajax-reset-loading-img");i.fadeOut();if(t==1){n.find(".of-save-save").html("Master Export File has been restored.");n.fadeIn();window.setTimeout(function(){location.reload()},1e3)}else{r.fadeIn();window.setTimeout(function(){r.fadeOut()},2e3)}})}return false});e("#of_demo").click(function(t){t.preventDefault();var n=confirm("You are about to import demo data. If you proceed, all existing settings and contents in all profiles will be overwritten.");if(n){e(".ajax-loading-img").fadeIn();var r=e("#security").val();var i=Math.floor(Math.random()*35e3);e(".ajax-reset-loading-img").fadeIn();var s={type:"restore_demo",action:"of_ajax_post_action",rand:i,security:r};e.post(ajaxurl,s,function(t){var n=e("#of-popup-reset");var r=e("#of-popup-fail");var i=e(".ajax-reset-loading-img");i.fadeOut();if(t==1){n.find(".of-save-save").html("Demo Data has been imported. Remember to also import the XML file, if required.");n.fadeIn();window.setTimeout(function(){location.reload()},1e3)}else{r.fadeIn();window.setTimeout(function(){r.fadeOut()},2e3)}})}return false});e("#of_demo_save").click(function(t){t.preventDefault();var n=confirm("This option will fail without write access.");if(n){e(".ajax-loading-img").fadeIn();var r=e("#security").val();e(".ajax-reset-loading-img").fadeIn();var i={type:"save_demo",action:"of_ajax_post_action",security:r};e.post(ajaxurl,i,function(t){var n=e("#of-popup-reset");var r=e("#of-popup-fail");var i=e(".ajax-reset-loading-img");i.fadeOut();if(t==1){n.find(".of-save-save").html("Demo file has been created.");n.fadeIn();window.setTimeout(function(){location.reload()},1e3)}else{r.fadeIn();window.setTimeout(function(){r.fadeOut()},2e3)}})}return false});e("#of_save_top").live("click",function(){a();return false});e("#of_save_bottom").live("click",function(){a();return false});e("#of_reset").click(function(){var t=confirm("Click OK to reset. All settings will be lost and replaced with default settings!");if(t){e(".ajax-loading-img").fadeIn();var n=e("#security").val();var r=e("#this_profile").val();e(".ajax-reset-loading-img").fadeIn();var i={type:"reset",action:"of_ajax_post_action",profile:r,security:n};e.post(ajaxurl,i,function(t){var n=e("#of-popup-reset");var r=e("#of-popup-fail");var i=e(".ajax-reset-loading-img");i.fadeOut();if(t==1){n.fadeIn();window.setTimeout(function(){location.reload()},1e3)}else{r.fadeIn();window.setTimeout(function(){r.fadeOut()},2e3)}})}return false});if(jQuery().tipsy){e(".typography-size, .typography-unit, .typography-height, .typography-face, .typography-style, .of-typography-color").tipsy({fade:true,gravity:"s",opacity:.7})}})